<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <!-- =========================================
         SEO & METADATA
         ========================================= -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudVault | Secure Encrypted File Hosting</title>
    <meta name="description" content="Upload, store, and share files securely. Free 10GB cloud storage with end-to-end encryption and fast transfer speeds. Built by Shiboshree Ry.">
    <meta name="keywords" content="file hosting, cloud storage, secure upload, file sharing, free cloud, encrypted storage, shiboshree ry, cloudvault">
    <meta name="author" content="Shiboshree Roy Full Stack Developer & Software Engineer">
    <meta name="application-name" content="CloudVault">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.cloudvault.com/">
    <meta property="og:title" content="CloudVault | Secure Your Digital Life">
    <meta property="og:description" content="Fast, private, and secure file hosting for everyone.">
    <meta property="og:image" content="https://via.placeholder.com/1200x630/0ea5e9/ffffff?text=CloudVault+Secure">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: {
                            blue: '#0ea5e9', // Sky Blue
                            dark: '#0f172a',
                            panel: '#1e293b',
                            success: '#10b981',
                            google: '#DB4437'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .dark ::-webkit-scrollbar-track { background: #0f172a; }
        .dark ::-webkit-scrollbar-thumb { background: #334155; }

        /* Animations */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-brand-dark dark:text-slate-200 min-h-screen flex flex-col transition-colors duration-300">
<script type='text/javascript' src='//saladattic.com/da/77/36/da7736b34f3f22802e60d7562bbc4ed9.js'></script>
    <!-- SECURITY BANNER -->
    <div class="bg-brand-panel text-slate-400 text-xs py-1 px-4 text-center border-b border-slate-700 font-mono flex justify-between items-center">
        <div class="hidden md:block"></div>
        <div>
            <i class="fa-solid fa-shield-halved text-brand-success mr-2"></i>
            Secure Connection | Your IP: <span id="user-ip" class="text-white">Scanning...</span>
        </div>
        <div class="text-xs text-orange-400 font-bold hidden md:block">
            <i class="fa-solid fa-stopwatch mr-1"></i> Auto-Destroy: 24H
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav class="sticky top-0 z-50 bg-white/90 dark:bg-brand-dark/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Logo -->
                <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.reload()">
                    <div class="w-9 h-9 bg-brand-blue rounded-xl flex items-center justify-center text-white text-lg shadow-lg shadow-sky-500/30">
                        <i class="fa-solid fa-cloud"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight">Cloud<span class="text-brand-blue">Vault</span></span>
                </div>

                <!-- Right Actions -->
                <div class="flex items-center gap-4">
                    <div class="hidden md:flex flex-col items-end">
                        <span class="text-xs font-bold uppercase text-slate-400">Storage</span>
                        <div class="w-32 h-2 bg-slate-200 dark:bg-slate-700 rounded-full mt-1 overflow-hidden">
                            <div id="storage-bar" class="bg-brand-blue h-full w-0 transition-all duration-1000"></div>
                        </div>
                    </div>

                    <button onclick="toggleTheme()" class="w-9 h-9 rounded-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center hover:text-brand-blue transition">
                        <i class="fa-solid fa-moon dark:hidden"></i>
                        <i class="fa-solid fa-sun hidden dark:block"></i>
                    </button>

                    <!-- Authentication State -->
                    <div id="auth-section">
                        <!-- Injected by JS: Login Button OR User Profile -->
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN DASHBOARD -->
    <main class="max-w-7xl mx-auto px-4 py-8 w-full flex-grow">
        
        <!-- LOGIN PROMPT (Visible if not logged in) -->
        <div id="login-prompt" class="hidden mb-8 bg-white dark:bg-brand-panel p-8 rounded-2xl border border-slate-200 dark:border-slate-700 text-center shadow-lg">
            <div class="w-16 h-16 bg-blue-50 dark:bg-slate-700 text-brand-blue rounded-full flex items-center justify-center text-3xl mx-auto mb-4">
                <i class="fa-solid fa-user-lock"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2">Login to Upload</h2>
            <p class="text-slate-500 mb-6 max-w-md mx-auto">Sign in to access encrypted storage. Your files are automatically deleted after 24 hours for privacy.</p>
            <button onclick="signInWithGoogle()" id="google-btn-main" class="bg-white hover:bg-slate-50 text-slate-700 border border-slate-300 dark:bg-slate-700 dark:text-white dark:border-slate-600 font-bold py-3 px-6 rounded-lg shadow-sm transition flex items-center justify-center gap-3 mx-auto w-full max-w-sm">
                <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5">
                <span>Continue with Google</span>
            </button>
        </div>

        <!-- UPLOAD ZONE (Hidden if not logged in) -->
        <div id="upload-section" class="mb-12 hidden">
            <div id="drop-zone" class="relative group border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-2xl bg-white dark:bg-slate-800/50 p-12 text-center transition-all duration-300 hover:border-brand-blue hover:bg-sky-50 dark:hover:bg-slate-800 cursor-pointer">
                
                <input type="file" id="file-input" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" multiple>
                
                <div class="flex flex-col items-center pointer-events-none">
                    <div class="w-16 h-16 bg-blue-100 dark:bg-slate-700 text-brand-blue rounded-full flex items-center justify-center text-3xl mb-4 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Drop files to upload</h2>
                    <p class="text-slate-500 mb-6">Auto-destruct enabled: Files deleted in <span class="text-brand-blue font-bold">24 Hours</span></p>
                    <div class="flex gap-4 text-xs font-bold text-slate-400 uppercase tracking-wide">
                        <span><i class="fa-solid fa-check text-green-500 mr-1"></i> AES-256</span>
                        <span><i class="fa-solid fa-check text-green-500 mr-1"></i> Temp Host</span>
                    </div>
                </div>

                <!-- Progress Overlay -->
                <div id="upload-overlay" class="absolute inset-0 bg-white/95 dark:bg-slate-800/95 flex-col items-center justify-center rounded-2xl hidden z-10">
                    <i class="fa-solid fa-circle-notch fa-spin text-4xl text-brand-blue mb-4"></i>
                    <h3 class="text-lg font-bold">Encrypting & Uploading...</h3>
                    <div class="w-64 h-2 bg-slate-200 dark:bg-slate-700 rounded-full mt-4 overflow-hidden">
                        <div id="progress-bar" class="h-full bg-brand-blue w-0 transition-all duration-200"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FILE MANAGER -->
        <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold flex items-center gap-2">
                <i class="fa-solid fa-folder-open text-brand-blue"></i> Your Files
            </h2>
            <div class="flex gap-2 text-sm">
                <button onclick="clearAllFiles()" class="text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1 rounded transition">Clear All</button>
            </div>
        </div>

        <!-- File List Container -->
        <div class="bg-white dark:bg-brand-panel rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden">
            <div class="grid grid-cols-12 gap-4 p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-xs font-bold uppercase text-slate-500">
                <div class="col-span-5 md:col-span-5">Name</div>
                <div class="col-span-3 md:col-span-2 text-center">Expires In</div>
                <div class="col-span-3 md:col-span-2 hidden md:block text-center">Size</div>
                <div class="col-span-4 md:col-span-3 text-right">Actions</div>
            </div>
            
            <div id="file-list" class="divide-y divide-slate-100 dark:divide-slate-700">
                <!-- Empty State -->
                <div id="empty-state" class="p-12 text-center text-slate-400">
                    <i class="fa-regular fa-folder-open text-4xl mb-3 opacity-50"></i>
                    <p>No active files.</p>
                </div>
            </div>
        </div>

    </main>

    <!-- SHARE MODAL -->
    <div id="share-modal" class="fixed inset-0 z-[70] bg-black/80 backdrop-blur-sm hidden flex items-center justify-center p-4">
        <div class="bg-white dark:bg-brand-panel w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transform transition-all scale-100">
            <div class="p-6 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center">
                <h3 class="text-lg font-bold">Share File</h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-red-500"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="p-6 text-center">
                <div class="w-32 h-32 bg-slate-100 mx-auto rounded-lg mb-6 p-2">
                    <img id="qr-code" src="" class="w-full h-full object-contain mix-blend-multiply">
                </div>
                
                <div class="flex items-center gap-2 bg-slate-100 dark:bg-slate-800 p-2 rounded-lg mb-4">
                    <input type="text" id="share-link" readonly class="bg-transparent w-full text-sm outline-none text-slate-600 dark:text-slate-300">
                    <button onclick="copyLink()" class="p-2 bg-white dark:bg-slate-700 rounded shadow-sm hover:text-brand-blue text-sm">
                        <i class="fa-regular fa-copy"></i>
                    </button>
                </div>
                
                <p class="text-xs text-orange-500 font-bold"><i class="fa-solid fa-triangle-exclamation mr-1"></i> Link expires when file is destroyed (24h).</p>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-white dark:bg-brand-panel border-t border-slate-200 dark:border-slate-800 py-10 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center md:text-left flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <div class="flex items-center gap-2 justify-center md:justify-start mb-1">
                    <span class="font-bold text-lg">CloudVault</span>
                </div>
                <p class="text-xs text-slate-500">
                    Premium file hosting with military-grade encryption.
                </p>
                <p class="text-xs text-slate-400 mt-1">Developed by <strong class="text-brand-blue">Shiboshree Ry</strong></p>
            </div>
            <div class="flex gap-4 text-sm text-slate-500">
                <a href="#" class="hover:text-brand-blue">Privacy</a>
                <a href="#" class="hover:text-brand-blue">Terms</a>
                <a href="#" class="hover:text-brand-blue">DMCA</a>
            </div>
        </div>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- 1. STATE & CONSTANTS ---
        const ONE_DAY_MS = 24 * 60 * 60 * 1000;
        let files = JSON.parse(localStorage.getItem('cloudVaultFiles') || '[]');
        let user = JSON.parse(localStorage.getItem('cloudVaultUser')); // User Session
        let usedStorage = 0;

        // Init
        window.addEventListener('DOMContentLoaded', () => {
            cleanupExpiredFiles(); // Run cleanup first
            checkAuth();
            fetchIP();
            // Start countdown timer loop
            setInterval(renderFiles, 60000); // Update UI every minute for accurate timers
        });

        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
        }

        // --- 2. AUTHENTICATION (Google OmniAuth Sim) ---
        function checkAuth() {
            const authSection = document.getElementById('auth-section');
            const loginPrompt = document.getElementById('login-prompt');
            const uploadSection = document.getElementById('upload-section');

            if (user) {
                // Logged In UI
                loginPrompt.classList.add('hidden');
                uploadSection.classList.remove('hidden');
                
                authSection.innerHTML = `
                    <div class="relative group">
                        <button class="w-9 h-9 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden border-2 border-brand-blue transition">
                            <img src="${user.avatar}" alt="User">
                        </button>
                        <div class="absolute right-0 mt-2 w-48 bg-white dark:bg-brand-panel rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 hidden group-hover:block fade-in z-50">
                            <div class="p-3 border-b border-slate-200 dark:border-slate-700">
                                <p class="text-xs font-bold text-brand-blue uppercase">Pro Plan</p>
                                <p class="text-sm truncate font-bold text-slate-700 dark:text-slate-200">${user.name}</p>
                                <p class="text-xs text-slate-400 truncate">${user.email}</p>
                            </div>
                            <button onclick="logout()" class="w-full text-left block px-4 py-2 text-sm text-red-500 hover:bg-slate-100 dark:hover:bg-slate-700">Sign Out</button>
                        </div>
                    </div>
                `;
                renderFiles();
            } else {
                // Guest UI
                loginPrompt.classList.remove('hidden');
                uploadSection.classList.add('hidden');
                authSection.innerHTML = `
                    <button onclick="signInWithGoogle()" class="text-sm font-bold text-slate-500 hover:text-brand-blue">Sign In</button>
                `;
                // If not logged in, clear files view for privacy (optional, but good for "Real World")
                document.getElementById('file-list').innerHTML = `<div class="p-12 text-center text-slate-400"><i class="fa-solid fa-lock text-4xl mb-3 opacity-50"></i><p>Login to view your files.</p></div>`;
            }
        }

        function signInWithGoogle() {
            const btn = document.getElementById('google-btn-main');
            const originalContent = btn.innerHTML;
            
            // 1. Loading State
            btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin text-brand-blue"></i> Connecting to Google...';
            btn.disabled = true;

            // 2. Simulation Delay (Network Request)
            setTimeout(() => {
                // 3. Mock User Data (What Google would return)
                user = {
                    name: "Shiboshree Ry",
                    email: "developer@cloudvault.com",
                    avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Felix"
                };
                localStorage.setItem('cloudVaultUser', JSON.stringify(user));
                
                // 4. Reload to apply state
                window.location.reload();
            }, 1500);
        }

        function logout() {
            localStorage.removeItem('cloudVaultUser');
            window.location.reload();
        }

        // --- 3. AUTO-DESTROY LOGIC ---
        function cleanupExpiredFiles() {
            const now = Date.now();
            const initialCount = files.length;
            
            // Filter out files that have passed their expiry time
            files = files.filter(file => {
                // If no expiry set (old files), keep them or set new expiry. 
                // For this demo, we assume all valid files have expiresAt
                return file.expiresAt && file.expiresAt > now;
            });

            if (files.length !== initialCount) {
                console.log(`Cleaned up ${initialCount - files.length} expired files.`);
                saveFiles();
            }
        }

        function getTimeRemaining(expiryTime) {
            const diff = expiryTime - Date.now();
            if (diff <= 0) return "Expired";
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            if (hours > 0) return `${hours}h ${minutes}m`;
            return `${minutes}m`;
        }

        // --- 4. UPLOAD LOGIC ---
        const fileInput = document.getElementById('file-input');
        if(fileInput) fileInput.addEventListener('change', handleUpload);

        function handleUpload(e) {
            if (!user) return alert("Please login first.");
            
            const newFiles = Array.from(e.target.files);
            if(newFiles.length === 0) return;

            // Show UI
            const overlay = document.getElementById('upload-overlay');
            const bar = document.getElementById('progress-bar');
            overlay.classList.remove('hidden');
            overlay.classList.add('flex');

            // Simulate Progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if(progress >= 100) progress = 100;
                bar.style.width = `${progress}%`;

                if(progress === 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        // Process Files
                        newFiles.forEach(f => {
                            const fileData = {
                                id: Date.now() + Math.random(),
                                name: f.name,
                                size: formatSize(f.size),
                                rawSize: f.size,
                                type: f.type || 'Unknown',
                                date: new Date().toLocaleDateString(),
                                expiresAt: Date.now() + ONE_DAY_MS // Set expiry 24h from now
                            };
                            files.unshift(fileData);
                        });
                        
                        saveFiles();
                        renderFiles();
                        
                        // Reset UI
                        overlay.classList.add('hidden');
                        overlay.classList.remove('flex');
                        bar.style.width = '0%';
                        fileInput.value = ''; // Reset input
                    }, 500);
                }
            }, 200);
        }

        // --- 5. RENDERER ---
        function renderFiles() {
            if (!user) return; // Don't render if logged out

            const list = document.getElementById('file-list');
            const empty = document.getElementById('empty-state');
            
            // Calculate Storage
            usedStorage = files.reduce((acc, curr) => acc + curr.rawSize, 0);
            updateStorageBar();

            if (files.length === 0) {
                list.innerHTML = '';
                list.appendChild(empty);
                empty.classList.remove('hidden');
                return;
            }
            
            empty.classList.add('hidden');
            list.innerHTML = files.map(file => {
                let icon = 'fa-file';
                if(file.type.includes('image')) icon = 'fa-file-image';
                if(file.type.includes('video')) icon = 'fa-file-video';
                if(file.type.includes('pdf')) icon = 'fa-file-pdf';
                if(file.type.includes('zip') || file.type.includes('compressed')) icon = 'fa-file-zipper';

                // Calculate visual progress for expiry bar
                const timeInfo = getTimeRemaining(file.expiresAt);
                const timeLeftPercent = ((file.expiresAt - Date.now()) / ONE_DAY_MS) * 100;
                const progressColor = timeLeftPercent < 20 ? 'bg-red-500' : 'bg-green-500';

                return `
                <div class="grid grid-cols-12 gap-4 p-4 items-center hover:bg-slate-50 dark:hover:bg-slate-800/50 transition fade-in group">
                    <div class="col-span-5 md:col-span-5 flex items-center gap-3 overflow-hidden">
                        <div class="w-8 h-8 rounded bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500">
                            <i class="fa-solid ${icon}"></i>
                        </div>
                        <div class="min-w-0">
                            <p class="font-bold text-sm truncate text-slate-700 dark:text-slate-200" title="${file.name}">${file.name}</p>
                            <p class="text-[10px] text-slate-400">${file.date}</p>
                        </div>
                    </div>
                    
                    <!-- Expiry Column -->
                    <div class="col-span-3 md:col-span-2 text-center">
                        <div class="text-xs font-mono font-bold text-slate-600 dark:text-slate-300 mb-1">${timeInfo}</div>
                        <div class="w-16 h-1 bg-slate-200 dark:bg-slate-700 rounded-full mx-auto overflow-hidden">
                            <div class="h-full ${progressColor}" style="width: ${timeLeftPercent}%"></div>
                        </div>
                    </div>

                    <div class="col-span-3 md:col-span-2 hidden md:block text-center text-xs font-mono text-slate-500">${file.size}</div>
                    
                    <div class="col-span-4 md:col-span-3 text-right flex justify-end gap-2">
                        <button onclick="openShare('${file.name}')" class="p-2 text-slate-400 hover:text-brand-blue hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition" title="Share">
                            <i class="fa-solid fa-share-nodes"></i>
                        </button>
                        <button onclick="deleteFile(${file.id})" class="p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition" title="Delete">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </div>
                </div>
                `;
            }).join('');
        }

        // --- 6. UTILS & APIs ---
        async function fetchIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                document.getElementById('user-ip').innerText = data.ip;
                document.getElementById('user-ip').classList.add('text-brand-success');
            } catch (e) {
                document.getElementById('user-ip').innerText = "Hidden";
            }
        }

        function formatSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateStorageBar() {
            const limit = 1073741824; // 1GB
            const pct = (usedStorage / limit) * 100;
            document.getElementById('storage-bar').style.width = `${Math.min(pct, 100)}%`;
        }

        function deleteFile(id) {
            if(!confirm('Are you sure you want to delete this file?')) return;
            files = files.filter(f => f.id !== id);
            saveFiles();
            renderFiles();
        }

        function clearAllFiles() {
            if(files.length === 0) return;
            if(!confirm('Delete ALL files? This cannot be undone.')) return;
            files = [];
            saveFiles();
            renderFiles();
        }

        function saveFiles() {
            localStorage.setItem('cloudVaultFiles', JSON.stringify(files));
        }

        // --- 7. SHARE LOGIC ---
        function openShare(filename) {
            const modal = document.getElementById('share-modal');
            const linkInput = document.getElementById('share-link');
            const qrImg = document.getElementById('qr-code');
            
            const hash = Math.random().toString(36).substring(7);
            const link = `https://dl.cloudvault.com/s/${hash}/${encodeURIComponent(filename)}`;
            
            linkInput.value = link;
            qrImg.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(link)}`;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeModal() {
            document.getElementById('share-modal').classList.add('hidden');
            document.getElementById('share-modal').classList.remove('flex');
        }

        function copyLink() {
            const input = document.getElementById('share-link');
            input.select();
            navigator.clipboard.writeText(input.value);
            alert("Link copied to clipboard!");
        }

    </script>
    <script type='text/javascript' src='//saladattic.com/62/85/d1/6285d13bedf7a063ac90fbb80b26b9be.js'></script>
</body>
</html>